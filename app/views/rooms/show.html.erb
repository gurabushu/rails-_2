<!-- 施設詳細 -->
<h2 class="room-title"><%= @room.name %></h2>
<div class="room-underline"></div>
<div class="room-detail-center">
  <p>エリア: <%= @room.area %></p>
  <p>説明：<%= @room.description %></p>
  <p>料金：<%= number_to_currency(@room.cash, unit: "¥", precision: 0) %>/日</p>
  <% if @room.img.attached? %>
    <%= image_tag @room.img, width: 200 %>
  <% else %>
    <%= image_tag "default_img.png", width: 200 %>
  <% end %>
</div>

<% unless user_signed_in? %>
  <div class="login-prompt" style="margin-top: 32px; text-align: center;">
    <%= link_to "ログインして予約する", new_user_session_path, class: "show-btn btn-primary" %>
    <%= link_to "新規登録はこちら", new_user_registration_path, class: "show-btn btn-secondary" %>
  </div>
<% else %>
  <div class="reservation-form-center">
    <%= form_with model: @reservation, url: room_reservations_path(@room), local: true do |f| %>
      <div class="form-group">
        <%= f.label :start_time, "チェックイン日時" %>
        <%= f.datetime_select :start_time, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label :end_time, "チェックアウト日時" %>
        <%= f.datetime_select :end_time, class: "form-control" %>
      </div>
      <div class="form-group">
        <%= f.label :person, "人数" %>
        <%= f.number_field :person, in: 1..10, class: "form-control" %>
      </div>
      <div class="form-group" style="text-align: center;">
        <%= f.submit "予約する", class: "btn btn-primary" %>
      </div>
    <% end %>
  </div>
<% end %>

<%= link_to "戻る", rooms_path, class: 'show-btn btn-success' %>

<h3>日にちごとの料金</h3>
<table>
  <tr>
    <th>日付</th>
    <th>料金</th>
  </tr>
  <% if @room.room_prices.any? %>
    <% @room.room_prices.order(:date).each do |rp| %>
      <tr>
        <td><%= rp.date %></td>
        <td><%= number_to_currency(rp.price, unit: "¥", precision: 0) %></td>
      </tr>
    <% end %>
  <% else %>
    <tr>
      <td>全日</td>
      <td><%= number_to_currency(@room.cash, unit: "¥", precision: 0) %>/1人</td>
    </tr>
  <% end %>
</table>

<% if @reservation.errors.any? %>
  <div class="alert alert-danger">
    <ul>
      <% @reservation.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>



